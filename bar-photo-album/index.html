<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nyangers Bar Album</title>
    <style>
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 16px;
        }
        .gallery-item img {
            width: 100%;
            height: auto;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <h1>Welcome to Nyangers Bar Album</h1>
    <p>More features coming soon! I will make 2 pages, one is the library, one will be the orders thanks to Andrew</p>

    <!-- Media gallery section -->
    <div id="media-gallery">
        <h2>Pic & Vid Album</h2>
        <div class="gallery-grid" id="gallery-grid">
            <!-- Media will be dynamically loaded here -->
        </div>
    </div>

    <!-- Button to open camera -->
    <button id="open-camera">Open Camera</button>
    
    <!-- Button to trigger the media upload -->
    <button id="upload-button">Upload</button>
        <!-- File input for selecting media -->
    <input type="file" id="media-upload" accept="media/*">
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.1269.0.min.js"></script>
    
    <script>
    // Your AWS S3 setup
    AWS.config.update({
        region: AWS_REGION, // Your region
        credentials: new AWS.CognitoIdentityCredentials({
            IdentityPoolId: 'YOUR_COGNITO_IDENTITY_POOL_ID' // Replace with your Cognito Identity Pool ID
        })
    });

    // Create S3 service object
    const s3 = new AWS.S3();

    // Elements
    const uploadButton = document.getElementById('upload-button');
    const imageUploadInput = document.getElementById('media-upload');

    uploadButton.addEventListener('click', () => {
        const file = imageUploadInput.files[0]; // Get the selected file

        if (file) {
            const params = {
                Bucket: S3_BUCKET_NAME,  // Replace with your bucket name
                Key: `uploads/${file.name}`,  // Path and name of file to be stored in S3
                Body: file,  // The file object
                ContentType: file.type,  // MIME type of the file
                ACL: 'public-read'  // This makes the file publicly accessible
            };

            // Upload the file to S3
            s3.upload(params, function(err, data) {
                if (err) {
                    console.error('Error uploading file:', err);
                    alert('Upload failed!');
                } else {
                    console.log('File uploaded successfully:', data);
                    alert('Upload successful!');
                    // You can optionally add the image URL to the page after successful upload
                    const imageUrl = data.Location; // URL of the uploaded file
                    console.log('File URL:', imageUrl);
                }
            });
        } else {
            alert('Please select an image or video first!');
        }
    });
</script>


    <script>
        // Array of public URLs of media stored in S3 (replace these with your actual URLs)
        const s3Urls = [
            'https://media.nyangers.com/testuploadnyangers.jpeg',
            'https://d3ejpwow0zoabp.cloudfront.net/testuploadnyangers.jpeg',
            'https://nyangers-bar-photo-album.s3.eu-west-2.amazonaws.com/1733193121879-testuploadnyangers.jpeg'
        ];

        // Function to load media into the gallery
        function loadGallery() {
            const galleryGrid = document.getElementById('gallery-grid');
            s3Urls.forEach(url => {
                const galleryItem = document.createElement('div');
                galleryItem.classList.add('gallery-item');
                galleryItem.innerHTML = `<img src="${url}" alt="Uploaded Media" />`;
                galleryGrid.appendChild(galleryItem);
            });
        }

        // Call the function to load media
        loadGallery();
    </script>
</body>
</html>